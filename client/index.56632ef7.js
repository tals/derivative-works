import{S as t,i as e,s as n,e as r,c as s,a,d as i,b as l,f as o,n as c,h,H as u,I as d,g as f,m,o as v,t as p,p as g,C as y,D as b,E as x,w,x as $,u as I,F as k,B as j,j as D,J as E,K as O,L as V,v as _,A as C,l as S,y as z,k as A}from"./client.47ea9a2a.js";import{E as M,d as N,P as G,e as P,h as T,i as F,j as H,f as B,c as J,a as K,k as L}from"./index.9e6369a0.js";var R=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t};var U=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},X="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Y="object"==typeof X&&X&&X.Object===Object&&X,q="object"==typeof self&&self&&self.Object===Object&&self,Q=(Y||q||Function("return this")()).Symbol,W=Object.prototype,Z=W.hasOwnProperty,tt=W.toString,et=Q?Q.toStringTag:void 0;var nt=function(t){var e=Z.call(t,et),n=t[et];try{t[et]=void 0;var r=!0}catch(t){}var s=tt.call(t);return r&&(e?t[et]=n:delete t[et]),s},rt=Object.prototype.toString;var st=function(t){return rt.call(t)},at=Q?Q.toStringTag:void 0;var it=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":at&&at in Object(t)?nt(t):st(t)};var lt=function(t){return null!=t&&"object"==typeof t};var ot=function(t){return"symbol"==typeof t||lt(t)&&"[object Symbol]"==it(t)},ct=/^\s+|\s+$/g,ht=/^[-+]0x[0-9a-f]+$/i,ut=/^0b[01]+$/i,dt=/^0o[0-7]+$/i,ft=parseInt;var mt=function(t){if("number"==typeof t)return t;if(ot(t))return NaN;if(U(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=U(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ct,"");var n=ut.test(t);return n||dt.test(t)?ft(t.slice(2),n?2:8):ht.test(t)?NaN:+t};var vt=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=mt(n))==n?n:0),void 0!==e&&(e=(e=mt(e))==e?e:0),R(mt(t),e,n)};function pt(t){let e;return{c(){e=r("canvas"),this.h()},l(t){e=s(t,"CANVAS",{width:!0,height:!0,hidden:!0}),a(e).forEach(i),this.h()},h(){l(e,"width",t[0]),l(e,"height",t[1]),e.hidden=!0},m(n,r){o(n,e,r),t[6](e)},p(t,[n]){1&n&&l(e,"width",t[0]),2&n&&l(e,"height",t[1])},i:c,o:c,d(n){n&&i(e),t[6](null)}}}function gt(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,a){function i(t){try{o(r.next(t))}catch(t){a(t)}}function l(t){try{o(r.throw(t))}catch(t){a(t)}}function o(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}o((r=r.apply(t,e||[])).next())}))};let s,a,{src:i}=e,{imageDataCtx:l}=e,{width:o}=e,{height:c}=e,{size:u={width:0,height:0}}=e;function d(t){return r(this,void 0,void 0,(function*(){n(3,l=void 0);const e=yield async function(t){return new Promise(((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.src=t}))}(t),{width:r,height:i}=e;n(2,s.width=r,s),n(2,s.height=i,s),n(4,u={width:r,height:i}),a.drawImage(e,0,0),n(3,l=a)}))}return t.$$set=t=>{"src"in t&&n(5,i=t.src),"imageDataCtx"in t&&n(3,l=t.imageDataCtx),"width"in t&&n(0,o=t.width),"height"in t&&n(1,c=t.height),"size"in t&&n(4,u=t.size)},t.$$.update=()=>{4&t.$$.dirty&&(a=s&&s.getContext("2d")),32&t.$$.dirty&&d(i)},[o,c,s,l,u,i,function(t){h[t?"unshift":"push"]((()=>{s=t,n(2,s)}))}]}class yt extends t{constructor(t){super(),e(this,t,gt,pt,n,{src:5,imageDataCtx:3,width:0,height:1,size:4})}}function bt(t,e,n){const r=t.slice();return r[16]=e[n],r[18]=n,r}function xt(t,e,n){const r=t.slice();return r[19]=e[n],r[18]=n,r}function wt(t){let e,n,c;return{c(){e=r("a"),n=u("arrow_back"),this.h()},l(t){e=s(t,"A",{class:!0,href:!0});var r=a(e);n=d(r,"arrow_back"),r.forEach(i),this.h()},h(){l(e,"class","left material-icons md-dark md-48 p-4 opacity-75 duration-300 hover:opacity-100"),l(e,"href",c="/exhibits/"+t[1].key)},m(t,r){o(t,e,r),f(e,n)},p(t,n){2&n&&c!==(c="/exhibits/"+t[1].key)&&l(e,"href",c)},d(t){t&&i(e)}}}function $t(t){let e,n,c;return{c(){e=r("a"),n=u("arrow_forward"),this.h()},l(t){e=s(t,"A",{class:!0,href:!0});var r=a(e);n=d(r,"arrow_forward"),r.forEach(i),this.h()},h(){l(e,"class","right material-icons md-dark md-48 p-4 opacity-75 duration-300 hover:opacity-100"),l(e,"href",c="/exhibits/"+t[2].key)},m(t,r){o(t,e,r),f(e,n)},p(t,n){4&n&&c!==(c="/exhibits/"+t[2].key)&&l(e,"href",c)},d(t){t&&i(e)}}}function It(t){let e,n,a,h,u,d,f,p=-1!==t[3]&&jt(t);return{c(){e=r("img"),h=m(),p&&p.c(),u=C(),this.h()},l(t){e=s(t,"IMG",{class:!0,style:!0,src:!0}),h=v(t),p&&p.l(t),u=C(),this.h()},h(){l(e,"class","rounded"),g(e,"touch-action","manipulation"),e.src!==(n=J(t[0]))&&l(e,"src",n)},m(n,r){o(n,e,r),o(n,h,r),p&&p.m(n,r),o(n,u,r),d||(f=[S(e,"mousemove",t[10]),S(e,"mouseout",t[9])],d=!0)},p(t,r){1&r&&e.src!==(n=J(t[0]))&&l(e,"src",n),-1!==t[3]?p?(p.p(t,r),8&r&&I(p,1)):(p=jt(t),p.c(),I(p,1),p.m(u.parentNode,u)):p&&(p.d(1),p=null)},i(t){a||D((()=>{a=E(e,B,{}),a.start()})),I(p)},o:c,d(t){t&&i(e),t&&i(h),p&&p.d(t),t&&i(u),d=!1,z(f)}}}function kt(t){let e,n,c,h,u,d,f;return{c(){e=r("video"),this.h()},l(t){e=s(t,"VIDEO",{class:!0,muted:!0,playsinline:!0,src:!0,autoplay:!0}),a(e).forEach(i),this.h()},h(){l(e,"class","absolute"),e.muted=n=!0,e.playsInline=!0,e.src!==(c=K(t[0]))&&l(e,"src",c),e.autoplay=!0},m(n,r){o(n,e,r),t[15](e),u=!0,d||(f=[S(e,"play",t[13]),S(e,"ended",t[14])],d=!0)},p(t,n){(!u||1&n&&e.src!==(c=K(t[0])))&&l(e,"src",c)},i(t){u||(h&&h.end(1),u=!0)},o(t){t&&(h=A(e,B,{})),u=!1},d(n){n&&i(e),t[15](null),n&&h&&h.end(),d=!1,z(f)}}}function jt(t){let e,n,a;return{c(){e=r("img"),this.h()},l(t){e=s(t,"IMG",{class:!0,style:!0,src:!0}),this.h()},h(){l(e,"class","rounded absolute inset-0 pointer-events-none"),g(e,"mix-blend-mode","multiply"),e.src!==(n=T(t[0],t[4]))&&l(e,"src",n)},m(t,n){o(t,e,n)},p(t,r){17&r&&e.src!==(n=T(t[0],t[4]))&&l(e,"src",n)},i(t){a||D((()=>{a=E(e,B,{duration:200}),a.start()}))},o:c,d(t){t&&i(e)}}}function Dt(t){let e,n,h,p,g,y,b;return{c(){e=r("div"),n=u("touch me"),p=m(),g=r("div"),y=u("hover over me"),this.h()},l(t){e=s(t,"DIV",{class:!0});var r=a(e);n=d(r,"touch me"),r.forEach(i),p=v(t),g=s(t,"DIV",{class:!0});var l=a(g);y=d(l,"hover over me"),l.forEach(i),this.h()},h(){l(e,"class","sm:hidden"),l(g,"class","hidden sm:block")},m(t,r){o(t,e,r),f(e,n),o(t,p,r),o(t,g,r),f(g,y)},i(t){h||D((()=>{h=E(e,L,{y:-10,duration:600,delay:200}),h.start()})),b||D((()=>{b=E(g,L,{y:-10,duration:600,delay:200}),b.start()}))},o:c,d(t){t&&i(e),t&&i(p),t&&i(g)}}}function Et(t){let e,n,a,c,h;return{c(){e=r("img"),a=m(),c=r("img"),this.h()},l(t){e=s(t,"IMG",{src:!0,hidden:!0}),a=v(t),c=s(t,"IMG",{src:!0,hidden:!0}),this.h()},h(){e.src!==(n=P(t[0],t[18]))&&l(e,"src",n),e.hidden=!0,c.src!==(h=T(t[0],t[18]))&&l(c,"src",h),c.hidden=!0},m(t,n){o(t,e,n),o(t,a,n),o(t,c,n)},p(t,r){1&r&&e.src!==(n=P(t[0],t[18]))&&l(e,"src",n),1&r&&c.src!==(h=T(t[0],t[18]))&&l(c,"src",h)},d(t){t&&i(e),t&&i(a),t&&i(c)}}}function Ot(t){let e,n;return{c(){e=r("img"),this.h()},l(t){e=s(t,"IMG",{class:!0,style:!0,src:!0}),this.h()},h(){l(e,"class","rounded absolute inset-0"),g(e,"mix-blend-mode","multiply"),e.src!==(n=P(t[0],t[4]))&&l(e,"src",n)},m(t,n){o(t,e,n)},p(t,r){17&r&&e.src!==(n=P(t[0],t[4]))&&l(e,"src",n)},d(t){t&&i(e)}}}function Vt(t){let e,n,c,h,u,d,g=t[18]===t[3]&&Ot(t);return{c(){e=r("a"),n=r("img"),h=m(),g&&g.c(),u=m(),this.h()},l(t){e=s(t,"A",{href:!0,target:!0,class:!0});var r=a(e);n=s(r,"IMG",{class:!0,src:!0}),h=v(r),g&&g.l(r),u=v(r),r.forEach(i),this.h()},h(){l(n,"class","rounded"),n.src!==(c=F(t[0],t[18]))&&l(n,"src",c),l(e,"href",d=H(t[16])),l(e,"target","_blank"),l(e,"class","border-4 border-transparent h-48 w-48 hover:scale-105 transition-all transform duration-100 hover:z-10 rounded relative"),p(e,"border-yellow-300",t[18]===t[3])},m(t,r){o(t,e,r),f(e,n),f(e,h),g&&g.m(e,null),f(e,u)},p(t,r){1&r&&n.src!==(c=F(t[0],t[18]))&&l(n,"src",c),t[18]===t[3]?g?g.p(t,r):(g=Ot(t),g.c(),g.m(e,u)):g&&(g.d(1),g=null),1&r&&d!==(d=H(t[16]))&&l(e,"href",d),8&r&&p(e,"border-yellow-300",t[18]===t[3])},d(t){t&&i(e),g&&g.d()}}}function _t(t){let e,n,c,p,g,D,E,C,S,z,A,M,P,T,F,H,B,J,K,L,R,U,X,Y;function q(e){t[11].call(null,e)}function Q(e){t[12].call(null,e)}let W={src:N(t[0])};void 0!==t[5]&&(W.imageDataCtx=t[5]),void 0!==t[6]&&(W.size=t[6]),e=new yt({props:W}),h.push((()=>O(e,"imageDataCtx",q))),h.push((()=>O(e,"size",Q)));let Z=t[1]&&wt(t),tt=t[2]&&$t(t);const et=[kt,It],nt=[];function rt(t,e){return t[8]?0:1}P=rt(t),T=nt[P]=et[P](t);let st=!t[8]&&"hcadfm"!==t[0].key&&Dt(),at=Array(t[0].palette_keys.length*G),it=[];for(let e=0;e<at.length;e+=1)it[e]=Et(xt(t,at,e));let lt=t[0].palette_keys,ot=[];for(let e=0;e<lt.length;e+=1)ot[e]=Vt(bt(t,lt,e));return{c(){y(e.$$.fragment),p=m(),g=r("div"),D=r("div"),E=r("div"),C=r("div"),Z&&Z.c(),S=m(),z=r("div"),tt&&tt.c(),A=m(),M=r("div"),T.c(),F=m(),H=r("div"),st&&st.c(),B=m();for(let t=0;t<it.length;t+=1)it[t].c();J=m(),K=r("div"),L=r("h1"),R=u("Source Material"),U=m(),X=r("div");for(let t=0;t<ot.length;t+=1)ot[t].c();this.h()},l(t){b(e.$$.fragment,t),p=v(t),g=s(t,"DIV",{class:!0});var n=a(g);D=s(n,"DIV",{class:!0});var r=a(D);E=s(r,"DIV",{class:!0});var l=a(E);C=s(l,"DIV",{});var o=a(C);Z&&Z.l(o),o.forEach(i),S=v(l),z=s(l,"DIV",{});var c=a(z);tt&&tt.l(c),c.forEach(i),l.forEach(i),A=v(r),M=s(r,"DIV",{class:!0});var h=a(M);T.l(h),h.forEach(i),F=v(r),H=s(r,"DIV",{class:!0});var u=a(H);st&&st.l(u),u.forEach(i),B=v(r);for(let t=0;t<it.length;t+=1)it[t].l(r);J=v(r),K=s(r,"DIV",{class:!0});var f=a(K);L=s(f,"H1",{class:!0});var m=a(L);R=d(m,"Source Material"),m.forEach(i),U=v(f),X=s(f,"DIV",{class:!0});var y=a(X);for(let t=0;t<ot.length;t+=1)ot[t].l(y);y.forEach(i),f.forEach(i),r.forEach(i),n.forEach(i),this.h()},h(){l(E,"class","flex justify-around w-96"),l(M,"class","relative h-96 w-96 md:w-128 md:h-128 lg:w-164 bg-white"),l(H,"class","instructions h-8 text-black"),l(L,"class","text-2xl text-black p-4"),l(X,"class","flex flex-wrap  justify-center"),l(K,"class","parts flex flex-col items-center"),l(D,"class","flex flex-col justify-center items-center"),l(g,"class","flex justify-center")},m(t,n){x(e,t,n),o(t,p,n),o(t,g,n),f(g,D),f(D,E),f(E,C),Z&&Z.m(C,null),f(E,S),f(E,z),tt&&tt.m(z,null),f(D,A),f(D,M),nt[P].m(M,null),f(D,F),f(D,H),st&&st.m(H,null),f(D,B);for(let t=0;t<it.length;t+=1)it[t].m(D,null);f(D,J),f(D,K),f(K,L),f(L,R),f(K,U),f(K,X);for(let t=0;t<ot.length;t+=1)ot[t].m(X,null);Y=!0},p(t,[r]){const s={};1&r&&(s.src=N(t[0])),!n&&32&r&&(n=!0,s.imageDataCtx=t[5],V((()=>n=!1))),!c&&64&r&&(c=!0,s.size=t[6],V((()=>c=!1))),e.$set(s),t[1]?Z?Z.p(t,r):(Z=wt(t),Z.c(),Z.m(C,null)):Z&&(Z.d(1),Z=null),t[2]?tt?tt.p(t,r):(tt=$t(t),tt.c(),tt.m(z,null)):tt&&(tt.d(1),tt=null);let a=P;if(P=rt(t),P===a?nt[P].p(t,r):(_(),w(nt[a],1,1,(()=>{nt[a]=null})),$(),T=nt[P],T||(T=nt[P]=et[P](t),T.c()),I(T,1),T.m(M,null)),t[8]||"hcadfm"===t[0].key?st&&(st.d(1),st=null):st?257&r&&I(st,1):(st=Dt(),st.c(),I(st,1),st.m(H,null)),1&r){let e;for(at=Array(t[0].palette_keys.length*G),e=0;e<at.length;e+=1){const n=xt(t,at,e);it[e]?it[e].p(n,r):(it[e]=Et(n),it[e].c(),it[e].m(D,J))}for(;e<it.length;e+=1)it[e].d(1);it.length=at.length}if(25&r){let e;for(lt=t[0].palette_keys,e=0;e<lt.length;e+=1){const n=bt(t,lt,e);ot[e]?ot[e].p(n,r):(ot[e]=Vt(n),ot[e].c(),ot[e].m(X,null))}for(;e<ot.length;e+=1)ot[e].d(1);ot.length=lt.length}},i(t){Y||(I(e.$$.fragment,t),I(T),I(st),Y=!0)},o(t){w(e.$$.fragment,t),w(T),Y=!1},d(t){k(e,t),t&&i(p),t&&i(g),Z&&Z.d(),tt&&tt.d(),nt[P].d(),st&&st.d(),j(it,t),j(ot,t)}}}var Ct=function(t,e,n,r){return new(n||(n=Promise))((function(s,a){function i(t){try{o(r.next(t))}catch(t){a(t)}}function l(t){try{o(r.throw(t))}catch(t){a(t)}}function o(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}o((r=r.apply(t,e||[])).next())}))};function St({params:t}){return Ct(this,void 0,void 0,(function*(){const e=M.find((e=>e.key===t.slug));e||this.error(404,"Not found");const n=M.indexOf(e),r=n-1>=0?M[n-1]:null;return{exhibit:e,next:n+1<M.length?M[n+1]:null,prev:r}}))}function zt(t,e,n){let r,s,{exhibit:a}=e,{prev:i}=e,{next:l}=e,o=-1,c=-1,u={width:0,height:0};let d=!0;return t.$$set=t=>{"exhibit"in t&&n(0,a=t.exhibit),"prev"in t&&n(1,i=t.prev),"next"in t&&n(2,l=t.next)},t.$$.update=()=>{1&t.$$.dirty&&a&&n(8,d=!0)},[a,i,l,o,c,r,u,s,d,function(){console.log("mouse out!"),n(4,c=-1),n(3,o=-1)},function(t){if(!r)return void console.log("no ctx");const e=t.target,s=0|vt(u.width*t.offsetX/e.width,0,u.width),i=0|vt(u.height*t.offsetY/e.height,0,u.height),l=r.getImageData(s,i,1,1).data[0]-1;n(3,o=l%a.palette_keys.length),n(4,c=l),console.log(`resolved ${s}, ${i} to piece `,o,c)},function(t){r=t,n(5,r)},function(t){u=t,n(6,u)},()=>n(7,s.playbackRate=1,s),()=>n(8,d=!1),function(t){h[t?"unshift":"push"]((()=>{s=t,n(7,s)}))}]}export default class extends t{constructor(t){super(),e(this,t,zt,_t,n,{exhibit:0,prev:1,next:2})}}export{St as preload};
