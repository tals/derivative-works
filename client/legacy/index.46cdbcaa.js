import{N as t,O as n,_ as r,a as e,b as i,c,i as o,s as a,d as s,S as u,f,g as l,h,e as d,j as v,k as m,o as p,n as g,r as y,p as x,P as b,Q as w,l as $,v as k,w as D,y as I,x as j,I as E,J as O,K as V,C as _,D as R,A as S,L as C,H as N,t as z,R as A,T as M,U as P,B as G,G as T,m as H,E as U,u as B}from"./client.c5c29cd2.js";import{E as F,d as J,P as K,e as L,h as Q,i as X,j as Y,f as q,c as W,a as Z,k as tt}from"./index.1fd4d17b.js";var nt=function(t,n,r){return t==t&&(void 0!==r&&(t=t<=r?t:r),void 0!==n&&(t=t>=n?t:n)),t};var rt=function(n){var r=t(n);return null!=n&&("object"==r||"function"==r)},et="object"==t(n)&&n&&n.Object===Object&&n,it="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,ct=(et||it||Function("return this")()).Symbol,ot=Object.prototype,at=ot.hasOwnProperty,st=ot.toString,ut=ct?ct.toStringTag:void 0;var ft=function(t){var n=at.call(t,ut),r=t[ut];try{t[ut]=void 0;var e=!0}catch(t){}var i=st.call(t);return e&&(n?t[ut]=r:delete t[ut]),i},lt=Object.prototype.toString;var ht=function(t){return lt.call(t)},dt=ct?ct.toStringTag:void 0;var vt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":dt&&dt in Object(t)?ft(t):ht(t)};var mt=function(n){return null!=n&&"object"==t(n)};var pt=function(n){return"symbol"==t(n)||mt(n)&&"[object Symbol]"==vt(n)},gt=/^\s+|\s+$/g,yt=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,bt=/^0o[0-7]+$/i,wt=parseInt;var $t=function(t){if("number"==typeof t)return t;if(pt(t))return NaN;if(rt(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=rt(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(gt,"");var r=xt.test(t);return r||bt.test(t)?wt(t.slice(2),r?2:8):yt.test(t)?NaN:+t};var kt=function(t,n,r){return void 0===r&&(r=n,n=void 0),void 0!==r&&(r=(r=$t(r))==r?r:0),void 0!==n&&(n=(n=$t(n))==n?n:0),nt($t(t),n,r)};async function Dt(t){return new Promise(((n,r)=>{const e=new Image;e.onload=()=>n(e),e.onerror=r,e.crossOrigin="anonymous",e.src=t}))}function It(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,c=e(t);if(n){var o=e(this).constructor;r=Reflect.construct(c,arguments,o)}else r=c.apply(this,arguments);return i(this,r)}}function jt(t){var n;return{c:function(){n=f("canvas"),this.h()},l:function(t){n=l(t,"CANVAS",{width:!0,height:!0,hidden:!0}),h(n).forEach(d),this.h()},h:function(){v(n,"width",t[0]),v(n,"height",t[1]),n.hidden=!0},m:function(r,e){m(r,n,e),t[6](n)},p:function(t,r){var e=p(r,1)[0];1&e&&v(n,"width",t[0]),2&e&&v(n,"height",t[1])},i:g,o:g,d:function(r){r&&d(n),t[6](null)}}}function Et(t,n,r){var e,i,c=this&&this.__awaiter||function(t,n,r,e){return new(r||(r=Promise))((function(i,c){function o(t){try{s(e.next(t))}catch(t){c(t)}}function a(t){try{s(e.throw(t))}catch(t){c(t)}}function s(t){var n;t.done?i(t.value):(n=t.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,a)}s((e=e.apply(t,n||[])).next())}))},o=n.src,a=n.imageDataCtx,s=n.width,u=n.height,f=n.size,l=void 0===f?{width:0,height:0}:f;return t.$$set=function(t){"src"in t&&r(5,o=t.src),"imageDataCtx"in t&&r(3,a=t.imageDataCtx),"width"in t&&r(0,s=t.width),"height"in t&&r(1,u=t.height),"size"in t&&r(4,l=t.size)},t.$$.update=function(){4&t.$$.dirty&&(i=e&&e.getContext("2d")),32&t.$$.dirty&&function(t){c(this,void 0,void 0,y.mark((function n(){var c,o,s;return y.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(3,a=void 0),n.next=3,Dt(t);case 3:c=n.sent,o=c.width,s=c.height,r(2,e.width=o,e),r(2,e.height=s,e),r(4,l={width:o,height:s}),i.drawImage(c,0,0),r(3,a=i);case 10:case"end":return n.stop()}}),n)})))}(o)},[s,u,e,a,l,o,function(t){x[t?"unshift":"push"]((function(){r(2,e=t)}))}]}var Ot=function(t){r(e,u);var n=It(e);function e(t){var r;return c(this,e),r=n.call(this),o(s(r),t,Et,jt,a,{src:5,imageDataCtx:3,width:0,height:1,size:4}),r}return e}();function Vt(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,c=e(t);if(n){var o=e(this).constructor;r=Reflect.construct(c,arguments,o)}else r=c.apply(this,arguments);return i(this,r)}}function _t(t,n,r){var e=t.slice();return e[16]=n[r],e[18]=r,e}function Rt(t,n,r){var e=t.slice();return e[19]=n[r],e[18]=r,e}function St(t){var n,r,e;return{c:function(){n=f("a"),r=b("arrow_back"),this.h()},l:function(t){n=l(t,"A",{class:!0,href:!0});var e=h(n);r=w(e,"arrow_back"),e.forEach(d),this.h()},h:function(){v(n,"class","left material-icons md-dark md-48 p-4 opacity-75 duration-300 hover:opacity-100"),v(n,"href",e="/exhibits/"+t[1].key)},m:function(t,e){m(t,n,e),$(n,r)},p:function(t,r){2&r&&e!==(e="/exhibits/"+t[1].key)&&v(n,"href",e)},d:function(t){t&&d(n)}}}function Ct(t){var n,r,e;return{c:function(){n=f("a"),r=b("arrow_forward"),this.h()},l:function(t){n=l(t,"A",{class:!0,href:!0});var e=h(n);r=w(e,"arrow_forward"),e.forEach(d),this.h()},h:function(){v(n,"class","right material-icons md-dark md-48 p-4 opacity-75 duration-300 hover:opacity-100"),v(n,"href",e="/exhibits/"+t[2].key)},m:function(t,e){m(t,n,e),$(n,r)},p:function(t,r){4&r&&e!==(e="/exhibits/"+t[2].key)&&v(n,"href",e)},d:function(t){t&&d(n)}}}function Nt(t){var n,r,e,i,c,o,a,s=-1!==t[3]&&At(t);return{c:function(){n=f("img"),i=k(),s&&s.c(),c=T(),this.h()},l:function(t){n=l(t,"IMG",{class:!0,style:!0,src:!0}),i=D(t),s&&s.l(t),c=T(),this.h()},h:function(){v(n,"class","rounded"),j(n,"touch-action","manipulation"),n.src!==(r=W(t[0]))&&v(n,"src",r)},m:function(r,e){m(r,n,e),m(r,i,e),s&&s.m(r,e),m(r,c,e),o||(a=[H(n,"mousemove",t[10]),H(n,"mouseout",t[9])],o=!0)},p:function(t,e){1&e&&n.src!==(r=W(t[0]))&&v(n,"src",r),-1!==t[3]?s?(s.p(t,e),8&e&&S(s,1)):((s=At(t)).c(),S(s,1),s.m(c.parentNode,c)):s&&(s.d(1),s=null)},i:function(t){e||z((function(){(e=A(n,q,{})).start()})),S(s)},o:g,d:function(t){t&&d(n),t&&d(i),s&&s.d(t),t&&d(c),o=!1,U(a)}}}function zt(t){var n,r,e,i,c,o;return{c:function(){n=f("video"),this.h()},l:function(t){n=l(t,"VIDEO",{class:!0,muted:!0,playsinline:!0,src:!0,autoplay:!0}),h(n).forEach(d),this.h()},h:function(){v(n,"class","absolute"),n.muted=!0,n.playsInline=!0,n.src!==(r=Z(t[0]))&&v(n,"src",r),n.autoplay=!0},m:function(r,e){m(r,n,e),t[15](n),i=!0,c||(o=[H(n,"play",t[13]),H(n,"ended",t[14])],c=!0)},p:function(t,e){(!i||1&e&&n.src!==(r=Z(t[0])))&&v(n,"src",r)},i:function(t){i||(e&&e.end(1),i=!0)},o:function(t){t&&(e=B(n,q,{})),i=!1},d:function(r){r&&d(n),t[15](null),r&&e&&e.end(),c=!1,U(o)}}}function At(t){var n,r,e;return{c:function(){n=f("img"),this.h()},l:function(t){n=l(t,"IMG",{class:!0,style:!0,src:!0}),this.h()},h:function(){v(n,"class","rounded absolute inset-0 pointer-events-none"),j(n,"mix-blend-mode","multiply"),n.src!==(r=Q(t[0],t[4]))&&v(n,"src",r)},m:function(t,r){m(t,n,r)},p:function(t,e){17&e&&n.src!==(r=Q(t[0],t[4]))&&v(n,"src",r)},i:function(t){e||z((function(){(e=A(n,q,{duration:200})).start()}))},o:g,d:function(t){t&&d(n)}}}function Mt(t){var n,r,e,i,c,o,a;return{c:function(){n=f("div"),r=b("touch me"),i=k(),c=f("div"),o=b("hover over me"),this.h()},l:function(t){n=l(t,"DIV",{class:!0});var e=h(n);r=w(e,"touch me"),e.forEach(d),i=D(t),c=l(t,"DIV",{class:!0});var a=h(c);o=w(a,"hover over me"),a.forEach(d),this.h()},h:function(){v(n,"class","sm:hidden"),v(c,"class","hidden sm:block")},m:function(t,e){m(t,n,e),$(n,r),m(t,i,e),m(t,c,e),$(c,o)},i:function(t){e||z((function(){(e=A(n,tt,{y:-10,duration:600,delay:200})).start()})),a||z((function(){(a=A(c,tt,{y:-10,duration:600,delay:200})).start()}))},o:g,d:function(t){t&&d(n),t&&d(i),t&&d(c)}}}function Pt(t){var n,r,e,i,c;return{c:function(){n=f("img"),e=k(),i=f("img"),this.h()},l:function(t){n=l(t,"IMG",{src:!0,hidden:!0}),e=D(t),i=l(t,"IMG",{src:!0,hidden:!0}),this.h()},h:function(){n.src!==(r=L(t[0],t[18]))&&v(n,"src",r),n.hidden=!0,i.src!==(c=Q(t[0],t[18]))&&v(i,"src",c),i.hidden=!0},m:function(t,r){m(t,n,r),m(t,e,r),m(t,i,r)},p:function(t,e){1&e&&n.src!==(r=L(t[0],t[18]))&&v(n,"src",r),1&e&&i.src!==(c=Q(t[0],t[18]))&&v(i,"src",c)},d:function(t){t&&d(n),t&&d(e),t&&d(i)}}}function Gt(t){var n,r;return{c:function(){n=f("img"),this.h()},l:function(t){n=l(t,"IMG",{class:!0,style:!0,src:!0}),this.h()},h:function(){v(n,"class","rounded absolute inset-0"),j(n,"mix-blend-mode","multiply"),n.src!==(r=L(t[0],t[4]))&&v(n,"src",r)},m:function(t,r){m(t,n,r)},p:function(t,e){17&e&&n.src!==(r=L(t[0],t[4]))&&v(n,"src",r)},d:function(t){t&&d(n)}}}function Tt(t){var n,r,e,i,c,o,a=t[18]===t[3]&&Gt(t);return{c:function(){n=f("a"),r=f("img"),i=k(),a&&a.c(),c=k(),this.h()},l:function(t){n=l(t,"A",{href:!0,target:!0,class:!0});var e=h(n);r=l(e,"IMG",{class:!0,src:!0}),i=D(e),a&&a.l(e),c=D(e),e.forEach(d),this.h()},h:function(){v(r,"class","rounded"),r.src!==(e=X(t[0],t[18]))&&v(r,"src",e),v(n,"href",o=Y(t[16])),v(n,"target","_blank"),v(n,"class","border-4 border-transparent h-48 w-48 hover:scale-105 transition-all transform duration-100 hover:z-10 rounded relative"),I(n,"border-yellow-300",t[18]===t[3])},m:function(t,e){m(t,n,e),$(n,r),$(n,i),a&&a.m(n,null),$(n,c)},p:function(t,i){1&i&&r.src!==(e=X(t[0],t[18]))&&v(r,"src",e),t[18]===t[3]?a?a.p(t,i):((a=Gt(t)).c(),a.m(n,c)):a&&(a.d(1),a=null),1&i&&o!==(o=Y(t[16]))&&v(n,"href",o),8&i&&I(n,"border-yellow-300",t[18]===t[3])},d:function(t){t&&d(n),a&&a.d()}}}function Ht(t){var n,r,e,i,c,o,a,s,u,g,y,I,j,z,A,T,H,U,B,F,L,Q,X,Y;function q(n){t[11].call(null,n)}function W(n){t[12].call(null,n)}var Z={src:J(t[0])};void 0!==t[5]&&(Z.imageDataCtx=t[5]),void 0!==t[6]&&(Z.size=t[6]),n=new Ot({props:Z}),x.push((function(){return M(n,"imageDataCtx",q)})),x.push((function(){return M(n,"size",W)}));var tt=t[1]&&St(t),nt=t[2]&&Ct(t),rt=[zt,Nt],et=[];function it(t,n){return t[8]?0:1}j=it(t),z=et[j]=rt[j](t);for(var ct=!t[8]&&"hcadfm"!==t[0].key&&Mt(),ot=Array(t[0].palette_keys.length*K),at=[],st=0;st<ot.length;st+=1)at[st]=Pt(Rt(t,ot,st));for(var ut=t[0].palette_keys,ft=[],lt=0;lt<ut.length;lt+=1)ft[lt]=Tt(_t(t,ut,lt));return{c:function(){E(n.$$.fragment),i=k(),c=f("div"),o=f("div"),a=f("div"),s=f("div"),tt&&tt.c(),u=k(),g=f("div"),nt&&nt.c(),y=k(),I=f("div"),z.c(),A=k(),T=f("div"),ct&&ct.c(),H=k();for(var t=0;t<at.length;t+=1)at[t].c();U=k(),B=f("div"),F=f("h1"),L=b("Source Material"),Q=k(),X=f("div");for(var r=0;r<ft.length;r+=1)ft[r].c();this.h()},l:function(t){O(n.$$.fragment,t),i=D(t),c=l(t,"DIV",{class:!0});var r=h(c);o=l(r,"DIV",{class:!0});var e=h(o);a=l(e,"DIV",{class:!0});var f=h(a);s=l(f,"DIV",{});var v=h(s);tt&&tt.l(v),v.forEach(d),u=D(f),g=l(f,"DIV",{});var m=h(g);nt&&nt.l(m),m.forEach(d),f.forEach(d),y=D(e),I=l(e,"DIV",{class:!0});var p=h(I);z.l(p),p.forEach(d),A=D(e),T=l(e,"DIV",{class:!0});var x=h(T);ct&&ct.l(x),x.forEach(d),H=D(e);for(var b=0;b<at.length;b+=1)at[b].l(e);U=D(e),B=l(e,"DIV",{class:!0});var $=h(B);F=l($,"H1",{class:!0});var k=h(F);L=w(k,"Source Material"),k.forEach(d),Q=D($),X=l($,"DIV",{class:!0});for(var j=h(X),E=0;E<ft.length;E+=1)ft[E].l(j);j.forEach(d),$.forEach(d),e.forEach(d),r.forEach(d),this.h()},h:function(){v(a,"class","flex justify-around w-96"),v(I,"class","relative h-96 w-96 md:w-128 md:h-128 lg:w-164 bg-white"),v(T,"class","instructions h-8 text-black"),v(F,"class","text-2xl text-black p-4"),v(X,"class","flex flex-wrap  justify-center"),v(B,"class","parts flex flex-col items-center"),v(o,"class","flex flex-col justify-center items-center"),v(c,"class","flex justify-center")},m:function(t,r){V(n,t,r),m(t,i,r),m(t,c,r),$(c,o),$(o,a),$(a,s),tt&&tt.m(s,null),$(a,u),$(a,g),nt&&nt.m(g,null),$(o,y),$(o,I),et[j].m(I,null),$(o,A),$(o,T),ct&&ct.m(T,null),$(o,H);for(var e=0;e<at.length;e+=1)at[e].m(o,null);$(o,U),$(o,B),$(B,F),$(F,L),$(B,Q),$(B,X);for(var f=0;f<ft.length;f+=1)ft[f].m(X,null);Y=!0},p:function(t,i){var c=p(i,1)[0],a={};1&c&&(a.src=J(t[0])),!r&&32&c&&(r=!0,a.imageDataCtx=t[5],P((function(){return r=!1}))),!e&&64&c&&(e=!0,a.size=t[6],P((function(){return e=!1}))),n.$set(a),t[1]?tt?tt.p(t,c):((tt=St(t)).c(),tt.m(s,null)):tt&&(tt.d(1),tt=null),t[2]?nt?nt.p(t,c):((nt=Ct(t)).c(),nt.m(g,null)):nt&&(nt.d(1),nt=null);var u=j;if((j=it(t))===u?et[j].p(t,c):(G(),_(et[u],1,1,(function(){et[u]=null})),R(),(z=et[j])||(z=et[j]=rt[j](t)).c(),S(z,1),z.m(I,null)),t[8]||"hcadfm"===t[0].key?ct&&(ct.d(1),ct=null):ct?257&c&&S(ct,1):((ct=Mt()).c(),S(ct,1),ct.m(T,null)),1&c){var f;for(ot=Array(t[0].palette_keys.length*K),f=0;f<ot.length;f+=1){var l=Rt(t,ot,f);at[f]?at[f].p(l,c):(at[f]=Pt(l),at[f].c(),at[f].m(o,U))}for(;f<at.length;f+=1)at[f].d(1);at.length=ot.length}if(25&c){var h;for(ut=t[0].palette_keys,h=0;h<ut.length;h+=1){var d=_t(t,ut,h);ft[h]?ft[h].p(d,c):(ft[h]=Tt(d),ft[h].c(),ft[h].m(X,null))}for(;h<ft.length;h+=1)ft[h].d(1);ft.length=ut.length}},i:function(t){Y||(S(n.$$.fragment,t),S(z),S(ct),Y=!0)},o:function(t){_(n.$$.fragment,t),_(z),Y=!1},d:function(t){C(n,t),t&&d(i),t&&d(c),tt&&tt.d(),nt&&nt.d(),et[j].d(),ct&&ct.d(),N(at,t),N(ft,t)}}}var Ut=function(t,n,r,e){return new(r||(r=Promise))((function(i,c){function o(t){try{s(e.next(t))}catch(t){c(t)}}function a(t){try{s(e.throw(t))}catch(t){c(t)}}function s(t){var n;t.done?i(t.value):(n=t.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,a)}s((e=e.apply(t,n||[])).next())}))};function Bt(t){var n=t.params;return Ut(this,void 0,void 0,y.mark((function t(){var r,e,i,c;return y.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=F.find((function(t){return t.key===n.slug})))||this.error(404,"Not found"),e=F.indexOf(r),i=e-1>=0?F[e-1]:null,c=e+1<F.length?F[e+1]:null,t.abrupt("return",{exhibit:r,next:c,prev:i});case 6:case"end":return t.stop()}}),t,this)})))}function Ft(t,n,r){var e,i,c=n.exhibit,o=n.prev,a=n.next,s=-1,u=-1,f={width:0,height:0};var l=!0;return t.$$set=function(t){"exhibit"in t&&r(0,c=t.exhibit),"prev"in t&&r(1,o=t.prev),"next"in t&&r(2,a=t.next)},t.$$.update=function(){1&t.$$.dirty&&c&&r(8,l=!0)},[c,o,a,s,u,e,f,i,l,function(){console.log("mouse out!"),r(4,u=-1),r(3,s=-1)},function(t){if(e){var n=t.target,i=0|kt(f.width*t.offsetX/n.width,0,f.width),o=0|kt(f.height*t.offsetY/n.height,0,f.height),a=e.getImageData(i,o,1,1).data[0]-1;r(3,s=a%c.palette_keys.length),r(4,u=a),console.log("resolved ".concat(i,", ").concat(o," to piece "),s,u)}else console.log("no ctx")},function(t){r(5,e=t)},function(t){r(6,f=t)},function(){return r(7,i.playbackRate=1,i)},function(){return r(8,l=!1)},function(t){x[t?"unshift":"push"]((function(){r(7,i=t)}))}]}var Jt=function(t){r(e,u);var n=Vt(e);function e(t){var r;return c(this,e),r=n.call(this),o(s(r),t,Ft,Ht,a,{exhibit:0,prev:1,next:2}),r}return e}();export default Jt;export{Bt as preload};
